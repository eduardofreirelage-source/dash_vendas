<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Vendas</title>
    <link rel="stylesheet" href="estoque_dash_vendas_styles (7).css">
</head>
<body>

    <div class="container">
        <header>
            <div class="header-main">
                <h1>Dashboard de Vendas</h1>
                <div class="status-box">
                    <span>Status:</span>
                    <span id="status">OK</span>
                </div>
            </div>
            <div class="header-controls">
                <div class="fx-quick-select" id="fxQuickChips">
                    <button class="fx-chip" data-win="today">Hoje</button>
                    <button class="fx-chip" data-win="yesterday">Ontem</button>
                    <button class="fx-chip active" data-win="last30">Últimos 30d</button>
                    <button class="fx-chip" data-win="lastMonth">Mês Passado</button>
                </div>

                <div class="fx-dropup-wrapper">
                    <button id="fxBtnMore" class="btn-alt" aria-expanded="false">
                        <svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>
                        <span>Filtros</span>
                    </button>
                    
                    <div class="fx-dropup-panel" id="fxDropup">
                        <div class="fx-du-header">
                            <h4>Filtros Avançados</h4>
                            <button id="fxDuClose" class="btn-icon"><svg viewBox="0 0 20 20" fill="currentColor"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg></button>
                        </div>
                        <div class="fx-du-body">
                            <div class="fx-du-row">
                                <div class="fx-du-group">
                                    <label for="fxDuStart">De</label>
                                    <input type="date" id="fxDuStart">
                                </div>
                                <div class="fx-du-group">
                                    <label for="fxDuEnd">Até</label>
                                    <input type="date" id="fxDuEnd">
                                </div>
                            </div>
                            <div class="fx-du-quick" id="fxDuQuickDays">
                                <button data-win="7">7d</button>
                                <button data-win="15">15d</button>
                                <button data-win="30" class="fx-active">30d</button>
                                <button data-win="90">90d</button>
                            </div>
                            <div class="fx-du-grid">
                                <div id="fxUnit" class="msel-box">
                                    <label>Unidade</label>
                                    <button class="msel-btn">Todas</button>
                                    <div class="msel-panel"></div>
                                </div>
                                <div id="fxStore" class="msel-box">
                                    <label>Loja</label>
                                    <button class="msel-btn">Todas</button>
                                    <div class="msel-panel"></div>
                                </div>
                                <div id="fxChannel" class="msel-box">
                                    <label>Canal</label>
                                    <button class="msel-btn">Todos</button>
                                    <div class="msel-panel"></div>
                                </div>
                                <div id="fxShift" class="msel-box">
                                    <label>Turno</label>
                                    <button class="msel-btn">Todos</button>
                                    <div class="msel-panel"></div>
                                </div>
                                <div id="fxPay" class="msel-box">
                                    <label>Pagamento</label>
                                    <button class="msel-btn">Todos</button>
                                    <div class="msel-panel"></div>
                                </div>
                                <div class="fx-du-group">
                                    <label for="fxCanceled">Cancelados</label>
                                    <select id="fxCanceled">
                                        <option value="nao">Não</option>
                                        <option value="sim">Sim</option>
                                        <option value="ambos">Ambos</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="fx-du-footer">
                            <button id="fxBtnReset" class="btn-alt">Limpar Filtros</button>
                            <button id="fxBtnApply" class="btn-main">Aplicar</button>
                        </div>
                    </div>
                </div>

                <label for="fileExcel" class="btn-main btn-upload-label" id="btnUploadLabel">
                    <svg viewBox="0 0 20 20" fill="currentColor"><path d="M9.25 13.25a.75.75 0 001.5 0V4.636l2.955 3.129a.75.75 0 001.09-1.03l-4.25-4.5a.75.75 0 00-1.09 0l-4.25 4.5a.75.75 0 101.09 1.03L9.25 4.636v8.614z"></path><path d="M3.5 12.75a.75.75 0 00-1.5 0v2.5A2.75 2.75 0 004.75 18h10.5A2.75 2.75 0 0018 15.25v-2.5a.75.75 0 00-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5z"></path></svg>
                    <span>Importar Planilha</span>
                    <input type="file" id="fileExcel" accept=".xlsx, .xls, .csv" style="display: none;">
                </label>
            </div>
        </header>

        <main>
            <div class="tabs" id="tabs">
                <button class="active" data-tab="geral">Visão Geral</button>
                <button data-tab="analiticos">Analíticos</button>
                <button data-tab="diagnostico">Diagnósticos</button>
            </div>

            <div class="tab active" id="tab-geral">
                <div class="kpi-grid">
                    <div class="kpi active" data-kpi="fat">
                        <div class="kpi-header">
                            <div class="label">Faturamento</div>
                            <div id="d_fat" class="delta"></div>
                        </div>
                        <div id="k_fat" class="val">R$ 0,00</div>
                        <div class="sub">Anterior: <span id="p_fat">R$ 0,00</span></div>
                    </div>
                    <div class="kpi" data-kpi="ped">
                        <div class="kpi-header">
                            <div class="label">Pedidos</div>
                            <div id="d_ped" class="delta"></div>
                        </div>
                        <div id="k_ped" class="val">0</div>
                        <div class="sub">Anterior: <span id="p_ped">0</span></div>
                    </div>
                    <div class="kpi" data-kpi="tkt">
                        <div class="kpi-header">
                            <div class="label">Ticket Médio</div>
                            <div id="d_tkt" class="delta"></div>
                        </div>
                        <div id="k_tkt" class="val">R$ 0,00</div>
                        <div class="sub">Anterior: <span id="p_tkt">R$ 0,00</span></div>
                    </div>
                    <div class="kpi" data-kpi="des">
                        <div class="kpi-header">
                            <div class="label">Incentivos</div>
                            <div id="d_des" class="delta"></div>
                        </div>
                        <div id="k_des" class="val">R$ 0,00</div>
                        <div class="sub">Anterior: <span id="p_des">R$ 0,00</span></div>
                    </div>
                </div>

                <div class="hero-panel" id="hero_main_kpi">
                    <div class="hero-header">
                        <select id="kpi-select">
                            <option value="fat">Faturamento</option>
                            <option value="ped">Pedidos</option>
                            <option value="tkt">Ticket Médio</option>
                            <option value="des">Incentivos</option>
                        </select>
                        <div class="hero-value">
                            <div class="hero-value-number">R$ 0,00</div>
                            <div id="d_hero_main" class="delta up"></div>
                        </div>
                        <div class="hero-sub-value">Anterior: R$ 0,00</div>
                    </div>
                    <div class="hero-split">
                        <div class="unit-kpi" id="unit-kpi-raja">
                            <div class="unit-kpi-label">Uni.Raja</div>
                            <div class="unit-kpi-main">
                                <div class="unit-kpi-value">R$ 0,00</div>
                                <div id="d_raja" class="delta"></div>
                            </div>
                            <div class="unit-kpi-sub">Anterior: R$ 0,00</div>
                        </div>
                        <div class="unit-kpi" id="unit-kpi-savassi">
                            <div class="unit-kpi-label">Uni.Savassi</div>
                            <div class="unit-kpi-main">
                                <div class="unit-kpi-value">R$ 0,00</div>
                                <div id="d_savassi" class="delta"></div>
                            </div>
                            <div class="unit-kpi-sub">Anterior: R$ 0,00</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab" id="tab-analiticos">
                <div class="panel">
                    <div class="card">
                        <div class="ch-title" id="title_month">Faturamento por mês</div>
                        <div class="ch-wrap">
                            <canvas id="ch_month"></canvas>
                        </div>
                    </div>
                    <div class="side">
                        <div class="card">
                            <div class="ch-title" id="title_top6">Participação por Loja</div>
                            <div class="ch-wrap donut-wrap">
                                <canvas id="ch_top6"></canvas>
                                <div id="top6Center" class="donut-center-text">Total: R$ 0,00</div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="ch-title" id="title_dow">Faturamento por Dia da Semana</div>
                            <div class="ch-wrap">
                                <canvas id="ch_dow"></canvas>
                            </div>
                        </div>
                        <div class="card">
                            <div class="ch-title" id="title_hour">Faturamento por Hora</div>
                            <div class="ch-wrap">
                                <canvas id="ch_hour"></canvas>
                            </div>
                        </div>
                        <div class="card">
                            <div class="ch-title" id="title_turno">Faturamento por Turno</div>
                            <div class="ch-wrap">
                                <canvas id="ch_turno"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab" id="tab-diagnostico">
                <div class="diag-panel">
                    <div class="diag-main">
                        <div class="card">
                             <div class="ch-title" id="diag_title_month">Faturamento por Mês</div>
                             <div class="ch-wrap">
                                 <canvas id="diag_ch_month"></canvas>
                             </div>
                        </div>
                        <div class="card">
                             <div class="ch-title" id="diag_title_dow">Faturamento por Dia da Semana</div>
                             <div class="ch-wrap">
                                 <canvas id="diag_ch_dow"></canvas>
                             </div>
                        </div>
                        <div class="card">
                             <div class="ch-title" id="diag_title_hour">Faturamento por Hora</div>
                             <div class="ch-wrap">
                                 <canvas id="diag_ch_hour"></canvas>
                             </div>
                        </div>
                    </div>
                    <div class="diag-side">
                        <div class="card">
                            <div class="hero-context"><strong>Destaques:</strong> Carregando...</div>
                            <div class="ins-list">
                                <p class="muted" style="text-align:center; padding: 20px;">Gerando insights...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="estoque_dash_vendas_app (13).js"></script>
</body>
</html>
