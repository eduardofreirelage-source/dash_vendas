<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Dashboard Executivo (v10.4) — Rodapé Minimal + Drop-up Enxuto</title>
  <style>
    :root{
      --bg:#f7f7fa; --card:#ffffff; --ink:#0f172a; --muted:#64748b; --line:#e5e7eb;
      --wine:#7b1e3a; --ok:#0b5d47;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--ink);font:11px/1.5 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif}
    .wrap{display:flex;min-height:100vh;flex-direction:column}
    .main{flex:1;display:flex;flex-direction:column;min-width:0}
    .top{position:sticky;top:0;z-index:10;background:#fff;padding:8px 12px;border-bottom:1px solid var(--line);display:flex;align-items:center;gap:10px}
    .tabs{display:flex;gap:6px}
    .tabs button{padding:4px 8px;border:0;border-radius:8px;background:transparent;font-weight:700;color:#334155;cursor:pointer}
    .tabs button.active{color:var(--wine);box-shadow:inset 0 -2px 0 var(--wine)}

    .section{padding:14px}
    .kpis{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:12px}
    .kpi{background:#fff;border:1px solid var(--line);border-radius:12px;padding:8px}
    .kpi h4{margin:0 0 4px 0;color:var(--muted);font-size:12px}
    .kpi .val{font-size:22px;font-weight:600}
    .delta{font-size:10px;border:1px solid #e2e8f0;border-radius:999px;padding:1px 6px;margin-left:6px}
    .delta.up{color:var(--ok);border-color:#b7dfd2;background:#eef9f5}
    .delta.down{color:var(--wine);border-color:#e8c7cf;background:#fcf3f5}

    .panel{display:grid;grid-template-columns:1fr 260px;gap:10px}
    .card{background:#fff;border:1px solid var(--line);border-radius:12px;padding:8px;display:flex;flex-direction:column;min-height:240px}
    .card .head{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
    .seg{display:inline-flex;border:1px solid var(--line);border-radius:8px;overflow:hidden}
    .seg button{padding:4px 8px;border:0;background:#fff;font-weight:700;color:#475569;cursor:pointer}
    .seg button.active{background:var(--wine);color:#fff}
    .chart{flex:1;border:1px dashed #d8dbe2;border-radius:10px;display:flex;align-items:center;justify-content:center}

    .side{display:flex;flex-direction:column;gap:8px}
    .mini{min-height:96px}
    .mini .val{font-size:18px;font-weight:600}

    @media (max-width:1200px){
      .panel{grid-template-columns:1fr}
      .kpis{grid-template-columns:repeat(2,1fr)}
    }

    /* ==== RODAPÉ MINIMAL ==== */
    .filters-bar{
      position:sticky; bottom:0; z-index:30;
      background:#fff; border-top:1px solid var(--line);
      padding:4px 8px;
      height:56px; display:flex; align-items:center; gap:8px;
    }
    .fb-left{display:flex; align-items:center; gap:8px; min-width:0; flex:1}
    .fb-title{font-weight:800;color:#334155;white-space:nowrap}
    .chips{display:flex; gap:6px; overflow:auto; scrollbar-width:none}
    .chips::-webkit-scrollbar{display:none}
    .chip{flex:0 0 auto; padding:4px 8px; border:1px solid #e7d5da; border-radius:999px; background:#fff; color:var(--wine); font-weight:700; cursor:pointer; font-size:10px}
    .chip.active{background:var(--wine); color:#fff; border-color:var(--wine)}
    .fb-right{display:flex; align-items:center; gap:6px}
    .iconbtn{display:inline-flex; align-items:center; justify-content:center; width:30px; height:30px; border:1px solid var(--line); border-radius:8px; background:#fff; cursor:pointer}
    .cta{padding:6px 10px; border:1px solid var(--wine); background:var(--wine); color:#fff; border-radius:8px; font-weight:800; cursor:pointer}
    .mutedbtn{padding:6px 10px; border:1px solid var(--line); background:#fff; color:#334155; border-radius:8px; font-weight:700; cursor:pointer}

    /* ========= DROP-UP ENXUTO ========= */
    .dropup{
      position:fixed; left:8px; right:8px; bottom:60px; z-index:40;
      background:#fff; border:1px solid var(--line); border-radius:12px;
      box-shadow:0 16px 40px rgba(0,0,0,.08);
      padding:0; display:none;
    }
    .dropup.show{display:block; animation:pop .15s ease-out}
    @keyframes pop{from{transform:translateY(8px);opacity:0}to{transform:translateY(0);opacity:1}}

    .du-head{position:sticky; top:0; background:#fff; border-bottom:1px solid var(--line); padding:8px 10px; display:flex; align-items:center; justify-content:space-between; border-top-left-radius:12px; border-top-right-radius:12px}
    .du-title{font-weight:900; color:#334155}
    .du-actions{display:flex; gap:6px}
    .du-body{padding:10px 10px; display:flex; flex-direction:column; gap:10px; max-height:56vh; overflow:auto}
    .du-sec{display:flex; flex-direction:column; gap:8px}
    .du-sec + .du-sec{padding-top:8px; border-top:1px dashed var(--line)}
    .du-sec h4{margin:0; font-size:11.5px; letter-spacing:.2px; text-transform:uppercase; color:#475569}

    .du-grid{display:grid; grid-template-columns:repeat(12,1fr); gap:8px; align-items:end}
    .du-grid .field{display:flex; flex-direction:column; gap:4px}
    .du-grid label{font-size:10px; color:#64748b}
    .du-grid input[type="date"], .du-grid select, .du-grid .msel{
      height:30px; padding:4px 8px; border:1px solid var(--line); border-radius:8px; background:#fff; font:inherit
    }
    .span2{grid-column:span 2} .span3{grid-column:span 3} .span4{grid-column:span 4} .span6{grid-column:span 6}

    /* Linha Período em Única Linha (datas + chips) */
    .period-line{display:grid; grid-template-columns:repeat(12,1fr); gap:8px; align-items:end}
    .sep{display:flex; align-items:center; justify-content:center; color:#94a3b8; font-weight:800}
    .chips-mini{display:flex; gap:6px; flex-wrap:wrap; justify-content:flex-end}
    .chips-mini .chip{padding:3px 7px; font-size:10px}

    /* Responsivo */
    @media (max-width:900px){
      .du-grid{grid-template-columns:repeat(2,1fr)}
      .span2,.span3,.span4,.span6{grid-column:span 1}
      .period-line{grid-template-columns:1fr 24px 1fr; grid-auto-rows:auto}
      .chips-mini{justify-content:flex-start}
    }
    @media (max-width:600px){
      .filters-bar{height:52px}
      .fb-title{display:none}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <main class="main">
      <div class="top">
        <div class="tabs" id="tabs">
          <button class="active" data-tab="vendas">Vendas</button>
          <button data-tab="analitico">Analítico</button>
          <button data-tab="diagnostico">Diagnóstico</button>
        </div>
      </div>

      <section class="section tab" id="tab-vendas" style="display:block">
        <div class="kpis">
          <div class="kpi"><h4>Faturamento <span class="delta up">▲ 12,8%</span></h4><div class="val">R$ 1.234.567</div></div>
          <div class="kpi"><h4>Pedidos <span class="delta up">▲ 8,4%</span></h4><div class="val">32.104</div></div>
          <div class="kpi"><h4>Ticket Médio <span class="delta up">▲ 4,0%</span></h4><div class="val">R$ 38,43</div></div>
          <div class="kpi"><h4>Incentivos <span class="delta down">▼ 2,1%</span></h4><div class="val">R$ 74.900</div></div>
        </div>
        <div class="panel">
          <div class="card">
            <div class="head">
              <div class="title">Vendas por mês — 12M vs 12M ant.</div>
              <div class="seg"><button class="active">Total</button><button>Média</button></div>
            </div>
            <div class="chart" aria-label="preview"><svg viewBox="0 0 600 200" class="sk" preserveAspectRatio="none"><rect x="0" y="180" width="600" height="1" fill="#e5e7eb"/><rect x="40" y="120" width="24" height="60" fill="var(--wine)"/><rect x="80" y="140" width="24" height="40" fill="var(--wine)"/><rect x="120" y="110" width="24" height="70" fill="var(--wine)"/><path d="M40 160 L80 150 L120 140 L160 155 L200 130 L240 135" stroke="#94a3b8" stroke-width="3" stroke-dasharray="6 6" fill="none"/></svg></div>
          </div>
          <div class="side">
            <div class="card mini"><div class="head"><div class="title">Faturamento Médio</div><span class="delta up">▲ 3,5%</span></div><div class="val">R$ 41.200</div></div>
            <div class="card mini"><div class="head"><div class="title">ROI</div><span class="delta up">▲ 2,1%</span></div><div class="val">148%</div></div>
            <div class="card mini"><div class="head"><div class="title">% Incentivos</div><span class="delta down">▼ 0,6%</span></div><div class="val">6,1%</div></div>
          </div>
        </div>
      </section>

      <section class="section tab" id="tab-analitico" style="display:none">
        <div class="card" style="min-height:200px"><div class="head"><div class="title">Conteúdo analítico</div></div><div class="chart">—</div></div>
      </section>

      <section class="section tab" id="tab-diagnostico" style="display:none">
        <div class="card" style="min-height:200px"><div class="head"><div class="title">Diagnóstico</div></div><div class="chart">—</div></div>
      </section>
    </main>

    <!-- ===== Rodapé Minimal ===== -->
    <footer class="filters-bar">
      <div class="fb-left">
        <div class="fb-title">Filtros:</div>
        <div class="chips" id="quickChips">
          <button class="chip" data-win="7D">7D</button>
          <button class="chip" data-win="15D">15D</button>
          <button class="chip active" data-win="30D">30D</button>
          <button class="chip" data-win="60D">60D</button>
          <button class="chip" data-win="90D">90D</button>
          <button class="chip" data-win="120D">120D</button>
        </div>
      </div>
      <div class="fb-right">
        <button class="iconbtn" id="btnMore" title="Mais filtros" aria-haspopup="dialog" aria-expanded="false">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M4 6h9M4 12h16M4 18h9" stroke="#334155" stroke-width="2" stroke-linecap="round"/>
            <circle cx="16" cy="6" r="2" stroke="#334155" stroke-width="2" fill="none"/>
            <circle cx="9" cy="18" r="2" stroke="#334155" stroke-width="2" fill="none"/>
            <circle cx="12" cy="12" r="2" stroke="#334155" stroke-width="2" fill="none"/>
          </svg>
        </button>
        <button class="mutedbtn" id="btnReset">Reset</button>
        <button class="cta" id="btnApply">Aplicar</button>
      </div>
    </footer>

    <!-- Drop-up (Mais filtros) enxuto -->
    <div class="dropup" id="dropup" role="dialog" aria-modal="true" aria-labelledby="duTitle">
      <div class="du-head">
        <div class="du-title" id="duTitle">Mais filtros</div>
        <div class="du-actions">
          <button class="mutedbtn" id="duClose">Fechar</button>
          <button class="cta" id="duApply">Aplicar</button>
        </div>
      </div>

      <div class="du-body">
        <!-- Seção Período (linha única) -->
        <section class="du-sec" aria-labelledby="secPeriodo">
          <h4 id="secPeriodo">Período</h4>
          <div class="period-line">
            <div class="field span3">
              <label>Data inicial</label>
              <input type="date" id="duStart">
            </div>
            <div class="sep">até</div>
            <div class="field span3">
              <label>Data final</label>
              <input type="date" id="duEnd">
            </div>
            <div class="field span5" style="justify-self:end">
              <label style="visibility:hidden">Janela</label>
              <div class="chips-mini" id="duQuick">
                <button class="chip" data-win="7D">7D</button>
                <button class="chip" data-win="15D">15D</button>
                <button class="chip" data-win="30D">30D</button>
                <button class="chip" data-win="60D">60D</button>
                <button class="chip" data-win="90D">90D</button>
                <button class="chip" data-win="120D">120D</button>
              </div>
            </div>
          </div>
        </section>

        <!-- Seção Segmentação -->
        <section class="du-sec" aria-labelledby="secSeg">
          <h4 id="secSeg">Segmentação</h4>
          <div class="du-grid">
            <div class="field span3">
              <label>Unidade</label>
              <div class="msel" tabindex="0">Todas</div>
            </div>
            <div class="field span3">
              <label>Loja</label>
              <div class="msel" tabindex="0">Todas</div>
            </div>
            <div class="field span3">
              <label>Turno</label>
              <div class="msel" tabindex="0">Todos</div>
            </div>
            <div class="field span3">
              <label>Canal</label>
              <div class="msel" tabindex="0">Todos</div>
            </div>
          </div>
        </section>

        <!-- Seção Status -->
        <section class="du-sec" aria-labelledby="secStatus">
          <h4 id="secStatus">Status</h4>
          <div class="du-grid">
            <div class="field span4">
              <label>Pagamento</label>
              <div class="msel" tabindex="0">Todos</div>
            </div>
            <div class="field span4">
              <label>Cancelado</label>
              <select>
                <option>Não</option>
                <option>Sim</option>
                <option>Ambos</option>
              </select>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>

  <script>
    // Tabs
    document.getElementById('tabs').addEventListener('click', (e)=>{
      const b=e.target.closest('button'); if(!b) return;
      document.querySelectorAll('.tabs button').forEach(x=>x.classList.toggle('active',x===b));
      document.querySelectorAll('.tab').forEach(t=> t.style.display = (t.id==='tab-'+b.dataset.tab)?'block':'none');
      window.scrollTo({top:0,behavior:'smooth'});
    });

    // Chips seleção única (rodapé)
    const quickChips = document.getElementById('quickChips');
    quickChips.addEventListener('click',(e)=>{
      const c=e.target.closest('.chip'); if(!c) return;
      setWinChips(c.dataset.win);
    });
    function setWinChips(win){
      document.querySelectorAll('#quickChips .chip').forEach(x=> x.classList.toggle('active', x.dataset.win===win));
      document.querySelectorAll('#duQuick .chip').forEach(x=> x.classList.toggle('active', x.dataset.win===win));
    }

    // Drop-up
    const dropup=document.getElementById('dropup');
    const btnMore=document.getElementById('btnMore');
    const duClose=document.getElementById('duClose');
    const duApply=document.getElementById('duApply');
    const btnApply=document.getElementById('btnApply');
    const btnReset=document.getElementById('btnReset');
    const duQuick=document.getElementById('duQuick');

    function showDropup(show){
      dropup.classList.toggle('show', show);
      btnMore.setAttribute('aria-expanded', show? 'true':'false');
      if(show) dropup.querySelector('input,select,.msel')?.focus();
    }
    btnMore.addEventListener('click', ()=> showDropup(!dropup.classList.contains('show')));
    duClose.addEventListener('click', ()=> showDropup(false));

    // Fechar ao clicar fora / Esc
    document.addEventListener('click',(e)=>{
      if(!dropup.classList.contains('show')) return;
      const isInside = dropup.contains(e.target) || btnMore.contains(e.target);
      if(!isInside) showDropup(false);
    });
    document.addEventListener('keydown',(e)=>{
      if(e.key==='Escape' && dropup.classList.contains('show')) showDropup(false);
    });

    // Chips no drop-up também selecionam janela
    duQuick.addEventListener('click',(e)=>{
      const c=e.target.closest('.chip'); if(!c) return;
      setWinChips(c.dataset.win);
    });

    // Stubs
    btnApply.addEventListener('click', ()=> alert('Aplicar filtros (rodapé)'));
    duApply.addEventListener('click', ()=> { alert('Aplicar filtros (drop-up)'); showDropup(false); });
    btnReset.addEventListener('click', ()=> { alert('Reset filtros'); setWinChips('30D'); document.getElementById('duStart').value=''; document.getElementById('duEnd').value=''; });
  </script>
</body>
</html>
