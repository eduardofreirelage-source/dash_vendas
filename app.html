<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width,initial-scale=1" name="viewport"/>
    <title>Mapa de Produ√ß√£o</title>
    <link href='data:image/svg+xml,&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128"&gt;&lt;rect x="0" y="0" width="128" height="128" rx="22" fill="%237b1e3a"/&gt;&lt;text x="64" y="78" text-anchor="middle" font-family="Arial" font-size="56" fill="white"&gt;MP&lt;/text&gt;&lt;/svg&gt;' rel="icon"/>
    <link rel="stylesheet" href="estoque_styles.css?v=8.1">
</head>
<body>
<main class="main">
    <div class="top">
        <div class="brand">
            <div class="logo">MP</div>
            <div>
                <h1 style="font-size:18px; margin:0; line-height:1.2">Mapa de Produ√ß√£o</h1>
                <div class="hint" style="margin:0;">Ficha t√©cnica, previs√£o e compras</div>
            </div>
        </div>
        <nav class="tabs" id="main-tabs">
            <button class="active" data-tab="cadastros">Cadastros</button>
            <button data-tab="producao">Produ√ß√£o</button>
            <button data-tab="compras">Compras</button>
            <button data-tab="estoque">Estoque</button>
        </nav>
        <div class="status-bar">
            <div id="status">Carregando‚Ä¶</div>
        </div>
    </div>

    <div class="content-wrap">
    
    <section class="tab-content active" id="tab-cadastros">
        <div class="section" id="section-cadastros">
            <nav class="subtabs" id="cadastro-subtabs">
                <button class="active" data-subtab="pratos">Pratos</button>
                <button data-subtab="componentes">Componentes</button>
                <button data-subtab="receitas">Receitas</button>
                <button data-subtab="ingredientes">Ingredientes</button>
                <button class="chip" data-subtab="um">Unidades de Medida</button>
                <button class="chip" data-subtab="unidades">Locais/Unidades</button>
                <button class="chip" data-subtab="categorias">Categorias</button>
            </nav>

            <div class="subpage active" id="sub-pratos">
                 </div>

            <div class="subpage" id="sub-componentes">
                 </div>

            <div class="subpage" id="sub-receitas">
                 </div>

            <div class="subpage" id="sub-ingredientes">
                 </div>

            <div class="subpage" id="sub-um">
                 </div>

            <div class="subpage" id="sub-unidades">
                  </div>

            <div class="subpage" id="sub-categorias">
                 </div>
        </div>
    </section>

    <section class="tab-content" id="tab-producao">
        <div class="section">
            <div class="actions-bar">
                <h2>Previs√£o de Vendas</h2>
                <div class="filters-container">
                    <div>
                        <label for="prev-data-inicio">Data In√≠cio</label>
                        <input type="date" id="prev-data-inicio">
                    </div>
                    <div>
                        <label for="prev-data-fim">Data Fim</label>
                        <input type="date" id="prev-data-fim">
                    </div>
                    <div>
                        <label for="cat-filter">Categoria de Prato</label>
                        <select id="cat-filter"><option value="">Todas as Categorias</option></select>
                    </div>
                </div>
                <div class="right">
                    <button class="btn pri" id="btnCalcularPrev">Calcular</button>
                </div>
            </div>
            
            <div class="table-container">
                <table id="tbl-previsao">
                    <thead>
                        <tr>
                            <th>Nome do Prato</th>
                            <th>Total Vendido no Per√≠odo</th>
                            <th>Previs√£o Ajustada (Di√°ria)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td colspan="3" style="text-align: center; padding: 20px;">Selecione o per√≠odo e clique em Calcular.</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <section class="tab-content" id="tab-compras">
        <div class="section">
             <div class="actions-bar">
                <h2>Sugest√µes de Compra</h2>
                <div class="right">
                    <button class="btn" id="btnRefreshSuggestions">üîÑ Atualizar</button>
                </div>
            </div>
            <p class="hint">Itens que est√£o abaixo do ponto de pedido (Estoque M√≠nimo) definido no cadastro de Ingredientes.</p>
            <div class="table-container">
                <table id="tbl-sugestoes">
                    <thead>
                        <tr>
                            <th>Ingrediente</th>
                            <th>Estoque Atual</th>
                            <th>Ponto de Pedido</th>
                            <th>Sugest√£o de Compra</th>
                            <th>√öltimo Fornecedor</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <section class="tab-content" id="tab-estoque">
        <div class="section">
            <nav class="subtabs" id="estoque-subtabs">
                <button class="active" data-subtab="movimentar">Movimentar</button>
                <button data-subtab="geral">Saldo Geral</button>
                <button data-subtab="lotes">Saldo por Lotes</button>
                <button data-subtab="historico">Hist√≥rico</button>
            </nav>
            
            <div class="subpage active" id="sub-movimentar">
                
                <div class="actions-bar">
                    <h2>Movimenta√ß√£o de Estoque</h2>
                </div>

                <div class="quick-actions-bar" id="quick-actions-bar">
                    <div class="quick-actions-label">A√ß√µes R√°pidas:</div>
                    <button class="btn quick-btn" data-quickmov="ENTRADA">‚ûï Entrada</button>
                    <button class="btn quick-btn" data-quickmov="SAIDA">‚ûñ Sa√≠da</button>
                    <button class="btn quick-btn" data-quickmov="AJUSTE">üîß Ajuste</button>
                    <button class="btn quick-btn" data-quickmov="TRANSFERENCIA">‚û°Ô∏è Transfer√™ncia</button>
                    <button class="btn quick-btn" data-quickmov="PRODUCAO">üç≥ Produ√ß√£o</button>
                </div>

                 </div>
            
            </div>
    </section>
    </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.4/dist/umd/supabase.min.js"></script>
<script src="app.js?v=8.1"></script>
</body>
</html>
