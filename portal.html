<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Pratos & Produção — Sistema Unificado</title>
  <style>
    :root{--bg:#f6f8fb;--card:#fff;--ink:#101828;--muted:#667085;--line:#e7e9ee;--wine:#7b1e3a;--ok:#059669}
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--ink);font:14px/1.55 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu}
    .wrap{max-width:1280px;margin:24px auto;padding:0 16px}
    .top{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}
    h1{margin:0;font-size:24px}
    .status{font-size:13px;color:var(--ok)}
    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin:12px 0}
    .tab{padding:9px 14px;border:1px solid var(--line);border-radius:10px;background:#fff;cursor:pointer}
    .tab.active{background:#eef2f6;font-weight:700}
    .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:12px;box-shadow:0 8px 24px rgba(16,24,40,.05)}
    .hint{color:#64748b;font-size:12px;margin:6px 0 10px}
    iframe{width:100%;border:1px solid var(--line);border-radius:12px;background:#fff;height:calc(100vh - 180px)}
    @media (max-width:900px){iframe{height:70vh}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <h1>Pratos & Produção — Sistema Unificado</h1>
      <div id="status" class="status">Pronto</div>
    </div>

    <div class="tabs">
      <button class="tab" data-route="#dash-pratos">Dash Pratos</button>
      <button class="tab" data-route="#dash-vendas">Dash Vendas</button>
      <button class="tab" data-route="#producao">Produção</button>
      <button class="tab" data-route="#cadastros">Cadastros</button>
    </div>

    <div class="card">
      <div class="hint">
        O conteúdo abaixo carrega o módulo correspondente em um <code>iframe</code> isolado.
        Arquivos esperados: <code>dash_pratos.html</code>, <code>dash_vendas.html</code>, <code>app.html</code>.
      </div>
      <iframe id="host" title="Módulo" loading="eager" referrerpolicy="no-referrer"></iframe>
    </div>
  </div>

  <script>
    (function(){
      const $ = (s, r=document)=> r.querySelector(s);
      const tabs = Array.from(document.querySelectorAll('.tab'));
      const host = $('#host');

      const ROUTES = {
        '#dash-pratos': './dash_pratos.html',
        '#dash-vendas': './dash_vendas.html',
        '#producao'   : './app.html#producao/prev',
        '#cadastros'  : './app.html#cadastros/pratos'
      };

      function activate(route){
        // tab visual
        tabs.forEach(t=> t.classList.toggle('active', t.dataset.route===route));
        // src do iframe
        host.src = ROUTES[route] || ROUTES['#dash-pratos'];
        // atualiza hash do portal
        if (location.hash !== route) history.replaceState(null,'',route);
      }

      // cliques nas tabs
      tabs.forEach(t=> t.addEventListener('click', ()=> activate(t.dataset.route)));

      // roteamento inicial
      function init(){
        const h = location.hash || '#dash-pratos';
        const route = ROUTES[h] ? h : '#dash-pratos';
        activate(route);
      }
      window.addEventListener('hashchange', init);
      document.addEventListener('DOMContentLoaded', init);
    })();
  </script>
</body>
</html>
